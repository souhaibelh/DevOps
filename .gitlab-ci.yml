stages:
  - build
  - test
  - docker-build
  - deploy

variables:
  JAVA_TAG: "latest"
  PYTHON_TAG: "latest"

spring-build-job:
  stage: build
  image: eclipse-temurin:17-jdk-alpine
  rules:
    - changes:
        - service-java/**/*
      variables:
        JAVA_TAG: $CI_COMMIT_SHA
  cache:
    key: maven
    paths: /cache/mvn-dependencies       
  script:
    - chmod +x ./service-java/mvnw
    - ./service-java/mvnw -f ./service-java/pom.xml compile -Dmaven.repo.local=/cache/mvn-dependencies